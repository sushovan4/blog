<!DOCTYPE = html>
<html  xml:lang="en" >
  
  <head>
    
    <!--  jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    
    <!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
    <!-- <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" /> -->

    <!-- Bootstrap Date-Picker Plugin -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- jQuery library -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Trips</title>
  
    <link rel="stylesheet" type="text/css" media="screen" href="style_trips.css" />
    <link href="http://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">    

  </head>
  
  <body>
    
    
    <div class="container text-center" style="background:beige;"><h4 style="color:orange;">Editor</h4>
<div class="btn-group" role="group">
<button class="btn btn-success btn-xs" onClick="putHeader()">Header</button>
<button class="btn btn-success btn-xs" onClick="putPara()">Paragraph</button>
<button class="btn btn-success btn-xs" onClick="putColor()">Color</button>
<button class="btn btn-success btn-xs" onClick="putBreak()">Next Line</button>
</div>

<div class="btn-group">
	      <button id="listGroup" type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Trips<span class="glyphicon glyphicon-chevron-down"></span>
	      </button>
	      <div  id="tripListEdit" class="dropdown-menu" aria-labelledby="listGroup">
	      </div>
	    </div>
	   
  <form action="tripSubmit.php" method="post" enctype="multipart/form-data">
   <input type="input" name="title" id="title" placeholder="Title" required/><br/>
   <textArea name="text" id="text" style="width:100%;" rows="15" placeholder="write here"></textArea>
    <input type="file" id="f0" name="f0"/>  
    <input type="file" id="f1" name="f1"/>   
    <input type="file" id="f2" name="f2"/>   
    <input type="file" id="f3" name="f3"/>   
    <input type="file" id="f4" name="f4"/>   
  <button type="submit" name="submit" class="btn btn-success btn-xs">Submit</button></form>
   </div>

    <div class="container text-center bg-black" style="background:green;"><h4 style="color:orange;">Viewer</h4>
       <div class="btn-group">
	      <button id="listGroup1" type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Trips<span class="glyphicon glyphicon-chevron-down"></span>
	      </button>
	      <div  id="tripListShow" class="dropdown-menu" aria-labelledby="listGroup1">
	      </div>
	    </div>
	
	<div id="tripReader" style="background:white; width:100%;text-align:left;"></div>
          <div id="myCarousel" class="carousel slide" data-ride="carousel">
		    
		    <!-- Wrapper for slides -->
		<div id="album" class="carousel-inner" role="listbox">
		<div class="item active">
                 <img src="1.jpg" alt="Flower">
                </div>
	     </div>
		    
		    <!-- Left and right controls -->
		    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
		      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
		      <span class="sr-only">Previous</span>
		    </a>
		    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
		      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
		      <span class="sr-only">Next</span>
		    </a>
		  </div>

        </div>

<script>
loadList( );
function loadList( )
{   
    var xhttp;
    if (window.XMLHttpRequest) {
	// code for IE7+, Firefox, Chrome, Opera, Safari
	xhttp = new XMLHttpRequest();
    } else {
	// code for IE6, IE5
	xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    
    xhttp.onreadystatechange = function() {
	if (this.readyState == 4 && this.status == 200) {
	    var text = this.responseText;
	    if( text != ""){
		document.getElementById( "tripListShow" ).innerHTML = text;
		document.getElementById( "tripListEdit" ).innerHTML = text;
		

	    }	   
	}
    };
    
    xhttp.open("GET", "tripListFetcher.php", true);
    xhttp.send();
    
}

function loadTrip(name)
{
   
    var xhttp;
    if (window.XMLHttpRequest) {
	// code for IE7+, Firefox, Chrome, Opera, Safari
	xhttp = new XMLHttpRequest();
    } else {
	// code for IE6, IE5
	xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    
    xhttp.onreadystatechange = function() {
	if (this.readyState == 4 && this.status == 200) {
	    var text = this.responseText;
	    if( text != ""){
		document.getElementById( "tripReader" ).innerHTML = text;
		
		
	    }
	}
    };
    
    xhttp.open("GET", "tripFetcher.php?q=" + name, true);
    xhttp.send();
    
}
function loadTripImg(name)
{
   
    var xhttp;
    if (window.XMLHttpRequest) {
	// code for IE7+, Firefox, Chrome, Opera, Safari
	xhttp = new XMLHttpRequest();
    } else {
	// code for IE6, IE5
	xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    
    xhttp.onreadystatechange = function() {
	if (this.readyState == 4 && this.status == 200) {
	    var text = this.responseText;
	    if( text != ""){
		document.getElementById( "album" ).innerHTML = text;
		
		
	    }
	}
    };
    
    xhttp.open("GET", "tripImgFetcher.php?q=" + name, true);
    xhttp.send();
    
}


function loadTripEdit(name)
{
   
    var xhttp;
    if (window.XMLHttpRequest) {
	// code for IE7+, Firefox, Chrome, Opera, Safari
	xhttp = new XMLHttpRequest();
    } else {
	// code for IE6, IE5
	xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    
    xhttp.onreadystatechange = function() {
	if (this.readyState == 4 && this.status == 200) {
	    var text = this.responseText;
	    if( text != ""){
		document.getElementById( "text" ).value = text;
		document.getElementById( "title" ).value = name;
		

		
	    }
	}
    };
    
    xhttp.open("GET", "tripFetcher.php?q=" + name, true);
    xhttp.send();
    
}


      $('#tripListShow').bind('click',function(event){
      var link = event.target;
      tripName =  link.text;
      loadTrip( tripName );
      loadTripImg( tripName );
      });

      $('#tripListEdit').bind('click',function(event){
      var link = event.target;
      tripName =  link.text;
      loadTripEdit( tripName );
      });

function putHeader( ) {
	document.getElementById("text").value = document.getElementById("text").value + '<h4 style="color:black;"></h4>';
}
function putPara( ) {
	document.getElementById("text").value = document.getElementById("text").value + '<p style="color:black;"></p>';
}
function putColor( ) {
	document.getElementById("text").value = document.getElementById("text").value + '<span style="color:black;"></span>';
}
function putBreak( ) {
	document.getElementById("text").value = document.getElementById("text").value + '<br>';
}
</script>
</body>